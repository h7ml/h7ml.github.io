import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as s,c,d as e,e as i,a,f as r}from"./app-Cbix2SPG.js";const p={},o=r('<h1 id="说说地址栏输入-url-敲下回车后发生了什么" tabindex="-1"><a class="header-anchor" href="#说说地址栏输入-url-敲下回车后发生了什么"><span>说说地址栏输入 URL 敲下回车后发生了什么?</span></a></h1><figure><img src="https://static.h7ml.cn/vitepress/assets/images/interview/11bf1f20-bdf4-11eb-85f6-6fac77c0c9b3.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="一、简单分析" tabindex="-1"><a class="header-anchor" href="#一、简单分析"><span>一、简单分析</span></a></h2><p>简单的分析，从输入 <code>URL</code>到回车后发生的行为如下：</p><ul><li>URL 解析</li><li>DNS 查询</li><li>TCP 连接</li><li>HTTP 请求</li><li>响应请求</li><li>页面渲染</li></ul><h2 id="二、详细分析" tabindex="-1"><a class="header-anchor" href="#二、详细分析"><span>二、详细分析</span></a></h2><h3 id="url-解析" tabindex="-1"><a class="header-anchor" href="#url-解析"><span>URL 解析</span></a></h3><p>首先判断你输入的是一个合法的<code>URL</code> 还是一个待搜索的关键词，并且根据你输入的内容进行对应操作</p><p><code>URL</code>的解析第过程中的第一步，一个<code>url</code>的结构解析如下：</p><figure><img src="https://static.h7ml.cn/vitepress/assets/images/interview/27a0c690-bdf4-11eb-ab90-d9ae814b240d.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="dns-查询" tabindex="-1"><a class="header-anchor" href="#dns-查询"><span>DNS 查询</span></a></h3><p>在之前文章中讲过<code>DNS</code>的查询，这里就不再讲述了</p><p>整个查询过程如下图所示：</p><figure><img src="https://static.h7ml.cn/vitepress/assets/images/interview/330fb770-bdf4-11eb-85f6-6fac77c0c9b3.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>最终，获取到了域名对应的目标服务器<code>IP</code>地址</p><h3 id="tcp-连接" tabindex="-1"><a class="header-anchor" href="#tcp-连接"><span>TCP 连接</span></a></h3><p>在之前文章中，了解到<code>tcp</code>是一种面向有连接的传输层协议</p><p>在确定目标服务器服务器的<code>IP</code>地址后，则经历三次握手建立<code>TCP</code>连接，流程如下：</p><figure><img src="https://static.h7ml.cn/vitepress/assets/images/interview/ad750790-bdf4-11eb-85f6-6fac77c0c9b3.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="发送-http-请求" tabindex="-1"><a class="header-anchor" href="#发送-http-请求"><span>发送 http 请求</span></a></h3><p>当建立<code>tcp</code>连接之后，就可以在这基础上进行通信，浏览器发送 <code>http</code> 请求到目标服务器</p><p>请求的内容包括：</p><ul><li>请求行</li><li>请求头</li><li>请求主体</li></ul><figure><img src="https://static.h7ml.cn/vitepress/assets/images/interview/bbcb60f0-bdf4-11eb-ab90-d9ae814b240d.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="响应请求" tabindex="-1"><a class="header-anchor" href="#响应请求"><span>响应请求</span></a></h3><p>当服务器接收到浏览器的请求之后，就会进行逻辑操作，处理完成之后返回一个<code>HTTP</code>响应消息，包括：</p><ul><li>状态行</li><li>响应头</li><li>响应正文</li></ul><figure><img src="https://static.h7ml.cn/vitepress/assets/images/interview/c5fe0140-bdf4-11eb-ab90-d9ae814b240d.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>在服务器响应之后，由于现在<code>http</code>默认开始长连接<code>keep-alive</code>，当页面关闭之后，<code>tcp</code>链接则会经过四次挥手完成断开</p><h3 id="页面渲染" tabindex="-1"><a class="header-anchor" href="#页面渲染"><span>页面渲染</span></a></h3><p>当浏览器接收到服务器响应的资源后，首先会对资源进行解析：</p><ul><li>查看响应头的信息，根据不同的指示做对应处理，比如重定向，存储 cookie，解压 gzip，缓存资源等等</li><li>查看响应头的 Content-Type 的值，根据不同的资源类型采用不同的解析方式</li></ul><p>关于页面的渲染过程如下：</p><ul><li>解析 HTML，构建 DOM 树</li><li>解析 CSS ，生成 CSS 规则树</li><li>合并 DOM 树和 CSS 规则，生成 render 树</li><li>布局 render 树（ Layout / reflow ），负责各元素尺寸、位置的计算</li><li>绘制 render 树（ paint ），绘制页面像素信息</li><li>浏览器会将各层的信息发送给 GPU，GPU 会将各层合成（ composite ），显示在屏幕上</li></ul><figure><img src="https://static.h7ml.cn/vitepress/assets/images/interview/db7bddd0-bdf4-11eb-85f6-6fac77c0c9b3.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="参考文献" tabindex="-1"><a class="header-anchor" href="#参考文献"><span>参考文献</span></a></h2>',36),d={href:"https://github.com/febobo/web-interview/issues/141",target:"_blank",rel:"noopener noreferrer"},h={href:"https://zhuanlan.zhihu.com/p/80551769",target:"_blank",rel:"noopener noreferrer"};function g(m,f){const t=l("ExternalLinkIcon");return s(),c("div",null,[o,e("ul",null,[e("li",null,[e("a",d,[i("https://github.com/febobo/web-interview/issues/141"),a(t)])]),e("li",null,[e("a",h,[i("https://zhuanlan.zhihu.com/p/80551769"),a(t)])])])])}const v=n(p,[["render",g],["__file","after_url.html.vue"]]),w=JSON.parse(`{"path":"/posts/interview/http/after_url.html","title":"说说地址栏输入 URL 敲下回车后发生了什么?","lang":"zh-CN","frontmatter":{"icon":"question","description":"前端物语|面试物语-说说地址栏输入 URL 敲下回车后发生了什么?","footer":"<a href='https://beian.mit.gov.cn/' target='blank'>浙ICP备2021037683号-2</a>说说地址栏输入 URL 敲下回车后发生了什么?","order":1,"star":1,"date":"2023-02-25T15:07:55.940Z","author":"h7ml","image":"https://www.h7ml.cn/logo.png","banner":"https://www.h7ml.cn/logo.png","category":["interview","http"],"tag":["interview","http"],"shortTitle":"前端物语|面试物语-说说地址栏输入 URL 敲下回车后发生了什么?","isOriginal":false,"head":[["meta",{"name":"keywords","content":"说说地址栏输入 URL 敲下回车后发生了什么?"}],["link",{"rel":"canonical","href":"https://www.h7ml.cn/posts/interview/http/after_url.html"}],["meta",{"property":"og:url","content":"https://www.h7ml.cn/posts/interview/http/after_url.html"}],["meta",{"property":"og:site_name","content":"h7ml-前端物语"}],["meta",{"property":"og:title","content":"说说地址栏输入 URL 敲下回车后发生了什么?"}],["meta",{"property":"og:description","content":"前端物语|面试物语-说说地址栏输入 URL 敲下回车后发生了什么?"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://www.h7ml.cn/logo.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-05-03T04:52:44.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://www.h7ml.cn/logo.png"}],["meta",{"name":"twitter:image:alt","content":"说说地址栏输入 URL 敲下回车后发生了什么?"}],["meta",{"property":"article:author","content":"h7ml"}],["meta",{"property":"article:tag","content":"interview"}],["meta",{"property":"article:tag","content":"http"}],["meta",{"property":"article:published_time","content":"2023-02-25T15:07:55.000Z"}],["meta",{"property":"article:modified_time","content":"2023-05-03T04:52:44.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"说说地址栏输入 URL 敲下回车后发生了什么?\\",\\"image\\":[\\"https://static.h7ml.cn/vitepress/assets/images/interview/11bf1f20-bdf4-11eb-85f6-6fac77c0c9b3.png\\",\\"https://static.h7ml.cn/vitepress/assets/images/interview/27a0c690-bdf4-11eb-ab90-d9ae814b240d.png\\",\\"https://static.h7ml.cn/vitepress/assets/images/interview/330fb770-bdf4-11eb-85f6-6fac77c0c9b3.png\\",\\"https://static.h7ml.cn/vitepress/assets/images/interview/ad750790-bdf4-11eb-85f6-6fac77c0c9b3.png\\",\\"https://static.h7ml.cn/vitepress/assets/images/interview/bbcb60f0-bdf4-11eb-ab90-d9ae814b240d.png\\",\\"https://static.h7ml.cn/vitepress/assets/images/interview/c5fe0140-bdf4-11eb-ab90-d9ae814b240d.png\\",\\"https://static.h7ml.cn/vitepress/assets/images/interview/db7bddd0-bdf4-11eb-85f6-6fac77c0c9b3.png\\"],\\"datePublished\\":\\"2023-02-25T15:07:55.000Z\\",\\"dateModified\\":\\"2023-05-03T04:52:44.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"h7ml\\"}]}"]]},"headers":[{"level":2,"title":"一、简单分析","slug":"一、简单分析","link":"#一、简单分析","children":[]},{"level":2,"title":"二、详细分析","slug":"二、详细分析","link":"#二、详细分析","children":[{"level":3,"title":"URL 解析","slug":"url-解析","link":"#url-解析","children":[]},{"level":3,"title":"DNS 查询","slug":"dns-查询","link":"#dns-查询","children":[]},{"level":3,"title":"TCP 连接","slug":"tcp-连接","link":"#tcp-连接","children":[]},{"level":3,"title":"发送 http 请求","slug":"发送-http-请求","link":"#发送-http-请求","children":[]},{"level":3,"title":"响应请求","slug":"响应请求","link":"#响应请求","children":[]},{"level":3,"title":"页面渲染","slug":"页面渲染","link":"#页面渲染","children":[]}]},{"level":2,"title":"参考文献","slug":"参考文献","link":"#参考文献","children":[]}],"git":{"createdTime":1683089564000,"updatedTime":1683089564000,"contributors":[{"name":"h7ml","email":"h7ml@qq.com","commits":1}]},"readingTime":{"minutes":2.61,"words":783},"filePathRelative":"posts/interview/http/after_url.md","localizedDate":"2023年2月25日","excerpt":"\\n<figure><img src=\\"https://static.h7ml.cn/vitepress/assets/images/interview/11bf1f20-bdf4-11eb-85f6-6fac77c0c9b3.png\\" alt=\\"\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption></figcaption></figure>\\n<h2>一、简单分析</h2>\\n<p>简单的分析，从输入 <code>URL</code>到回车后发生的行为如下：</p>\\n<ul>\\n<li>URL 解析</li>\\n<li>DNS 查询</li>\\n<li>TCP 连接</li>\\n<li>HTTP 请求</li>\\n<li>响应请求</li>\\n<li>页面渲染</li>\\n</ul>"}`);export{v as comp,w as data};
