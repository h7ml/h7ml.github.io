import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as c,o as i,c as u,a,w as p,d as n,e as s,f as e}from"./app-Cbix2SPG.js";const r={},k=n("h2",{id:"交互",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#交互"},[n("span",null,"交互")])],-1),d=n("h3",{id:"点击上传多个文件-multiple",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#点击上传多个文件-multiple"},[n("span",null,[s("点击上传多个文件 "),n("code",null,"multiple")])])],-1),m=n("p",null,[s("用户可以选择多个文件，然后文件列表会显示出来。需要注意的是，文件的选择是通过"),n("code",null,'<input type="file" multiple>'),s("标签来实现的，其中"),n("code",null,"multiple"),s("属性允许选择多个文件。")],-1),v=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" useState"),n("span",{class:"token punctuation"},","),s(" useEffect"),n("span",{class:"token punctuation"},","),s(" ChangeEvent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" React"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("files"),n("span",{class:"token punctuation"},","),s(" setFiles"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useState"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("fileList"),n("span",{class:"token punctuation"},","),s(" setFileList"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useState"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"handleChange"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"e"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" files "),n("span",{class:"token operator"},"="),s(" e"),n("span",{class:"token punctuation"},"."),s("target"),n("span",{class:"token punctuation"},"."),s("files"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("files"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token function"},"setFiles"),n("span",{class:"token punctuation"},"("),s("Array"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),s("files"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token function"},"useEffect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" fileList "),n("span",{class:"token operator"},"="),s(" files"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"file"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" file"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"setFileList"),n("span",{class:"token punctuation"},"("),s("fileList"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s("files"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token operator"},"<"),s("div"),n("span",{class:"token operator"},">"),s(`
      `),n("span",{class:"token operator"},"<"),s("input type"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},'"file"'),s(" multiple onChange"),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"{"),s("handleChange"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"/"),n("span",{class:"token operator"},">"),s(`
      `),n("span",{class:"token operator"},"<"),s("ul"),n("span",{class:"token operator"},">"),s(`
        `),n("span",{class:"token punctuation"},"{"),s("fileList"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("file"),n("span",{class:"token punctuation"},","),s(" index")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"("),s(`
          `),n("span",{class:"token operator"},"<"),s("li key"),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"{"),s("index"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"{"),s("file"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("li"),n("span",{class:"token operator"},">"),s(`
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("ul"),n("span",{class:"token operator"},">"),s(`
    `),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("div"),n("span",{class:"token operator"},">"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=e('<h3 id="点击上传文件夹-odirectory" tabindex="-1"><a class="header-anchor" href="#点击上传文件夹-odirectory"><span>点击上传文件夹 <code>odirectory</code></span></a></h3><p>允许用户上传整个文件夹，而不仅仅是单个文件。使用<code>&lt;input type=&quot;file&quot; webkitdirectory mozdirectory odirectory&gt;</code>标签来启用文件夹上传功能。在处理时，代码会检查文件是否为文件夹，然后递归读取文件夹中的文件列表。</p><h4 id="webkitdirectory、mozdirectory和odirectory是用于html文件输入元素-input-type-file-的属性-用于启用文件夹上传功能。它们是浏览器厂商引入的一些非标准属性-因此在不同浏览器中的支持程度可能会有所不同。" tabindex="-1"><a class="header-anchor" href="#webkitdirectory、mozdirectory和odirectory是用于html文件输入元素-input-type-file-的属性-用于启用文件夹上传功能。它们是浏览器厂商引入的一些非标准属性-因此在不同浏览器中的支持程度可能会有所不同。"><span><code>webkitdirectory</code>、<code>mozdirectory</code>和<code>odirectory</code>是用于<code>HTML</code>文件输入元素<code>&lt;input type=&quot;file&quot;&gt;</code>的属性，用于启用文件夹上传功能。它们是浏览器厂商引入的一些非标准属性，因此在不同浏览器中的支持程度可能会有所不同。</span></a></h4><h5 id="webkitdirectory" tabindex="-1"><a class="header-anchor" href="#webkitdirectory"><span><code>webkitdirectory</code>：</span></a></h5><p>支持浏览器： <code>WebKit</code>内核的浏览器，如<code>Google Chrome</code>和<code>Safari</code>。作用： 当设置<code>webkitdirectory</code>属性时，文件输入框会打开一个文件选择对话框，允许用户选择文件夹而不仅仅是单个文件。这允许用户选择整个文件夹中的所有文件，而不必一个一个地选择。</p>',5),f={href:"https://caniuse.com/?search=webkitdirectory",target:"_blank",rel:"noopener noreferrer"},h=e('<h5 id="mozdirectory" tabindex="-1"><a class="header-anchor" href="#mozdirectory"><span><code>mozdirectory</code>：</span></a></h5><p>支持浏览器： <code>Mozilla Firefox</code>浏览器。作用： 类似于<code>webkitdirectory</code>，<code>mozdirectory</code>属性用于启用文件夹上传功能。它允许用户在<code>Firefox</code>浏览器中选择整个文件夹进行上传。</p>',2),y={href:"https://caniuse.com/?search=mozdirectory",target:"_blank",rel:"noopener noreferrer"},g=n("h5",{id:"odirectory",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#odirectory"},[n("span",null,[n("code",null,"odirectory"),s("：")])])],-1),w=n("p",null,[s("支持浏览器： 这是"),n("code",null,"Opera"),s("浏览器引入的一个属性。作用： 类似于前两者，"),n("code",null,"odirectory"),s("属性用于启用文件夹上传功能。用户可以在 Opera 浏览器中选择整个文件夹。需要注意的是，由于这些属性不是 HTML 标准的一部分，因此在不同浏览器中的支持可能不稳定。它们主要用于特定浏览器内核的实现，因此在跨浏览器应用程序中使用时，需要小心检查并处理不同浏览器的兼容性。在现代 Web 开发中，通常使用其他更标准的方法，如使用"),n("code",null,"JavaScript"),s("来处理文件上传和文件夹选择，以确保跨浏览器兼容性。")],-1),E={href:"https://caniuse.com/?search=directory",target:"_blank",rel:"noopener noreferrer"},B=e(`<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> ChangeEvent <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>files<span class="token punctuation">,</span> setFiles<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> files <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setFiles</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fileList <span class="token operator">=</span> files<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> file<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>files<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span> webkitdirectory mozdirectory odirectory onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>fileList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>file<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><h3 id="拖拽上传文件和文件夹datatransfer" tabindex="-1"><a class="header-anchor" href="#拖拽上传文件和文件夹datatransfer"><span>拖拽上传文件和文件夹<code>dataTransfer</code></span></a></h3>`,3),x=n("p",null,[s("用户可以将文件或文件夹拖拽到指定区域进行上传。代码使用"),n("code",null,"onDragOver"),s("和"),n("code",null,"onDrop"),s("事件来处理拖拽操作，并通过"),n("code",null,"e.dataTransfer.items"),s("来获取拖拽的文件和文件夹列表。")],-1),A=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" useState"),n("span",{class:"token punctuation"},","),s(" useEffect"),n("span",{class:"token punctuation"},","),s(" ChangeEvent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" React"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("files"),n("span",{class:"token punctuation"},","),s(" setFiles"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useState"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("fileList"),n("span",{class:"token punctuation"},","),s(" setFileList"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useState"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"handleChange"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"e"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" files "),n("span",{class:"token operator"},"="),s(" e"),n("span",{class:"token punctuation"},"."),s("target"),n("span",{class:"token punctuation"},"."),s("files"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("files"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token function"},"setFiles"),n("span",{class:"token punctuation"},"("),s("Array"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),s("files"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"handleDragOver"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"e"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    e`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preventDefault"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"handleDrop"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"e"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    e`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"preventDefault"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" files "),n("span",{class:"token operator"},"="),s(" e"),n("span",{class:"token punctuation"},"."),s("dataTransfer"),n("span",{class:"token punctuation"},"."),s("items"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 判断是否为文件夹"),s(`
    `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"const"),s(" item "),n("span",{class:"token keyword"},"of"),s(" files"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"const"),s(" entry "),n("span",{class:"token operator"},"="),s(" item"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"webkitGetAsEntry"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("entry"),n("span",{class:"token punctuation"},"."),s("isDirectory"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'is directory'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        entry`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createReader"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"readEntries"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"entries"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
          console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("entries"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
          `),n("span",{class:"token keyword"},"const"),s(" fileList "),n("span",{class:"token operator"},"="),s(" entries"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"entry"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" entry"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
          `),n("span",{class:"token function"},"setFileList"),n("span",{class:"token punctuation"},"("),s("fileList"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'is file'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        entry`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"file"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"file"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
          console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("file"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
          `),n("span",{class:"token function"},"setFiles"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s("file"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token function"},"useEffect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" fileList "),n("span",{class:"token operator"},"="),s(" files"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"file"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" file"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"setFileList"),n("span",{class:"token punctuation"},"("),s("fileList"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s("files"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token operator"},"<"),s("div"),n("span",{class:"token operator"},">"),s(`
      `),n("span",{class:"token operator"},"<"),s("input type"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},'"file"'),s(" multiple onChange"),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"{"),s("handleChange"),n("span",{class:"token punctuation"},"}"),s(" onDragOver"),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"{"),s("handleDragOver"),n("span",{class:"token punctuation"},"}"),s(" onDrop"),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"{"),s("handleDrop"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"/"),n("span",{class:"token operator"},">"),s(`
      `),n("span",{class:"token operator"},"<"),s("ul"),n("span",{class:"token operator"},">"),s(`
        `),n("span",{class:"token punctuation"},"{"),s("fileList"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("file"),n("span",{class:"token punctuation"},","),s(" index")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"("),s(`
          `),n("span",{class:"token operator"},"<"),s("li key"),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"{"),s("index"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"{"),s("file"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("li"),n("span",{class:"token operator"},">"),s(`
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("ul"),n("span",{class:"token operator"},">"),s(`
    `),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("div"),n("span",{class:"token operator"},">"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),C=e(`<h3 id="如何实现多文件上传" tabindex="-1"><a class="header-anchor" href="#如何实现多文件上传"><span>如何实现多文件上传</span></a></h3><ol><li>把选择的文件放到一个数组里 <code>files</code> 一次性发送到服务器，服务器接收到后，再一次性处理</li><li>把选择的文件形成不同的请求，每个请求只处理一个文件一般会选择第二种，第一种方式，如果文件很多，其中一个文件上传失败，需要重新上传所有文件，很难保证对每一个文件的独立控制。第二种方式，需要控制并发数，如果并发数太大，可能会导致服务器崩溃，可以对于每个文件进行单独的控制，比如上传进度，上传取消等。</li></ol><h2 id="上传进度progress" tabindex="-1"><a class="header-anchor" href="#上传进度progress"><span>上传进度<code>progress</code></span></a></h2><p>使用<code>XMLHttpRequest</code>对象来发送文件，并通过<code>xhr.upload.onprogress</code>事件来监听上传进度。上传进度以百分比形式显示给用户。 ::: react-demo 上传进度</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>progress<span class="token punctuation">,</span> setProgress<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleUpload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> file <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/upload&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> percentComplete <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>loaded <span class="token operator">/</span> event<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">setProgress</span><span class="token punctuation">(</span>percentComplete<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleUpload<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>progress<span class="token punctuation">}</span><span class="token operator">%</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><h3 id="如何实现上传进度追踪" tabindex="-1"><a class="header-anchor" href="#如何实现上传进度追踪"><span>如何实现上传进度追踪</span></a></h3>`,7),j=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" useState "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" React"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("progress"),n("span",{class:"token punctuation"},","),s(" setProgress"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useState"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("xhr"),n("span",{class:"token punctuation"},","),s(" setXhr"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useState"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"handleUpload"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"e"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" file "),n("span",{class:"token operator"},"="),s(" e"),n("span",{class:"token punctuation"},"."),s("target"),n("span",{class:"token punctuation"},"."),s("files"),n("span",{class:"token operator"},"?."),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("file"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"const"),s(" xhr "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"XMLHttpRequest"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      xhr`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"open"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'POST'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'/upload'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      xhr`),n("span",{class:"token punctuation"},"."),s("upload"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function-variable function"},"onprogress"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"event"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token punctuation"},"."),s("lengthComputable"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token keyword"},"const"),s(" percentComplete "),n("span",{class:"token operator"},"="),s(" Math"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"round"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token punctuation"},"."),s("loaded "),n("span",{class:"token operator"},"/"),s(" event"),n("span",{class:"token punctuation"},"."),s("total"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"100"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
          `),n("span",{class:"token function"},"setProgress"),n("span",{class:"token punctuation"},"("),s("percentComplete"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
      xhr`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),s("file"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token function"},"setXhr"),n("span",{class:"token punctuation"},"("),s("xhr"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"handleCancel"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("xhr"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      xhr`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"abort"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token function"},"setXhr"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token function"},"setProgress"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token operator"},"<"),s("div"),n("span",{class:"token operator"},">"),s(`
      `),n("span",{class:"token operator"},"<"),s("input type"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},'"file"'),s(" onChange"),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"{"),s("handleUpload"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"/"),n("span",{class:"token operator"},">"),s(`
      `),n("span",{class:"token operator"},"<"),s("p"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"{"),s("progress"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token operator"},"%"),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("p"),n("span",{class:"token operator"},">"),s(`
      `),n("span",{class:"token punctuation"},"{"),s("xhr "),n("span",{class:"token operator"},"&&"),s(),n("span",{class:"token operator"},"<"),s("button onClick"),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"{"),s("handleCancel"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token operator"},">"),s("Cancel"),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("button"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token operator"},"<"),n("span",{class:"token operator"},"/"),s("div"),n("span",{class:"token operator"},">"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1);function _(D,F){const t=c("CodeDemo"),o=c("ExternalLinkIcon");return i(),u("div",null,[k,d,m,a(t,{id:"code-demo-9",type:"react",title:"%E7%82%B9%E5%87%BB%E4%B8%8A%E4%BC%A0%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6",code:"eJxtUT1vgzAU/CsnJiMh2FuIVFXp1KkdQwYrPFK3YJAxUSLk/17bYKBSJ57x3bsPT9H3ED1Fl04OGhPGgT4115S46VjXdNEJXr+4vNLxRlLDoMAH8Yt+LmUp6d53SqOimo+NBotRHDCVEpgXnmrR0JBgIP3mprNlBwl2Osd2yR/ouxis3oJ2h38IG8Xaqhqa3Vkco00+QLy+vaNUc3UlnfofXhYQNZg/x4GE1Sl7UYo/0lp17YKZzQLGfcxiZG2J7bLvxV0Iq+9XpC3vmd/msW5IJW8pbN7l9ig3zHcmWapcG1CkRyXBZmZeidshRMiF7EcN/eipKCNHKyO09n1E3xA6ORdWTPv6DLKNPzbrDEzByeY+gZAV3X2IxcDCbAR+6FFM/t4cPNfkWSN2C+PYN+jx2SqVZyGCS+jqjcwvc/HVIg=="},{default:p(()=>[v]),_:1}),b,n("ul",null,[n("li",null,[n("a",f,[s("兼容性"),a(o)])])]),h,n("ul",null,[n("li",null,[n("a",y,[s("兼容性"),a(o)])])]),g,w,n("ul",null,[n("li",null,[n("a",E,[s("兼容性"),a(o)])]),n("li",null,[a(t,{id:"code-demo-60",type:"react",title:"%E7%82%B9%E5%87%BB%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%A4%B9",code:"eJyrrgUAAXUA+Q=="})])]),B,a(t,{id:"code-demo-71",type:"react",title:"%E6%8B%96%E6%8B%BD%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E4%BB%B6%E5%A4%B9",code:"eJyNVMtu00AU/ZUrbzqWInsPSaSKBDZISMCu6WKIr8NQZ8aamYRGltewZFXxARU7xA7x+J0m38E8PLYruxUrz+Pcc889vneq6IOKnkRrwZWGCnYK32iqcWJXyzzHtZ7As/eUb3C5R66hhhm8RrrWT1d8xfG6FFJDhjndFRpIDLM5VCsO4AkvclagmoBC/dyuLk10SEEuLmNDcg/6kimTr0HbzUhAF2JkZQV6dQZHsEsfIC6/ucNEU7lBnbgDlxaA5UDcPg5B0Col51LSQ5JLsW0wXixAbT/1iJCFpJtXe5QDKZiUEq17C+8T8VTjHKL83/hhjRnV9K2kXOUoE6ZxGypNUzh+vj3dfD99/XH88u3u15/Tzae7vz+Pt789IBcSiKezcSByT9tzxt8aFfJgkllU8hHfXTH9AvW5WtrzVpj31mETphZMmj4S8tBj83yiwKQQG3LGFGQBddaxmNodx1qiaQDTdxlKEidml9mEzPwnl8Us+oYNEwRQj7lvn20166BHJVtael6j2LB6DZxu8X58r09dj9hFH1F3mxqwUPhY+ZZgpHJ7TBz74wVaxMMSFXHj1QzcUN1IZ7fzT3pTPeKZaxPvWKtyIOZhp+pJ80i0sy1R7yQH4iOnGdvPg84p4+VOgz6UOFtFNmwVwdZMBCsLBMH9UzCr+g9Dbc7DZIabsPd3ouzORVlD2uXbFe0aoArKu2onwHiG167oRnATWTC4wsOscvf13MXW07RgPcI4bow3+LRNNU1DydYR+zui+h+yX9Gv"},{default:p(()=>[x,A]),_:1}),C,a(t,{id:"code-demo-105",type:"react",title:"%E4%B8%8A%E4%BC%A0%E8%BF%9B%E5%BA%A6%E8%BF%BD%E8%B8%AA%E7%94%A8%E6%88%B7%E5%8F%AF%E4%BB%A5%E7%82%B9%E5%87%BB%60Cancel%60%E6%8C%89%E9%92%AE%E6%9D%A5%E4%B8%AD%E6%AD%A2%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%EF%BC%8C%E8%BF%99%E5%AF%B9%E4%BA%8E%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C%E5%92%8C%E6%8E%A7%E5%88%B6%E9%9D%9E%E5%B8%B8%E6%9C%89%E7%94%A8%E3%80%82%E4%BB%A3%E7%A0%81%E4%BD%BF%E7%94%A8%60xhr.abort()%60%E6%96%B9%E6%B3%95%E6%9D%A5%E4%B8%AD%E6%AD%A2%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E3%80%82",code:"eJxlUk1v2zAM/SuEgTXKUNjZdbO9Qy47rFjRbkCBpgfFZmJvmqTKVD9g+L9XsqLYbnWxJb5HPj6yT/52ydekUrIj6MF2eEucEAYo4AZ5Rd92El+0MgQ1HrgVBGwNRQn9TgIE2r026miw6y6hQ7o+XR5chpiObdYuzxn/0pgReteYBUpaITxwgjZc1gL/aKF47ZAMp9oRcmgFuhCmxM0RKfX37nt6v3kYSwK0B2D+cR15kelkOKLEZ7i7+vmDSN/go8WOWBDrj4OkSqNkq+tft79Xl7DK7ChmtcSEx1TJaMUo9gklzQVHNWMgFSiP1GzVf22J7xf6Jo0aTeXAHiXQzaWAK05NapSVNYuJXGmsIYNwJUVcrOEzfNmcbI9nNh32LvEcOMTfYdFjh67kaOT5OcyQuWh8G7me936GWy4rFN6WuSPeDc+eWveV+N7t22wKpzJxPT42c+5zUd4gWSOBhVBet09lJOetdK4DvWosdolvapeAklun9YhFP1+7AbKJpss+Tnj4lGf6HOn9Ml1cQL63REr6XKKt/sVUofuhDN88C6jy5HSeRW2+Dy8/Gd4ANZQjXw=="},{default:p(()=>[j]),_:1})])}const z=l(r,[["render",_],["__file","文件上传.html.vue"]]),S=JSON.parse(`{"path":"/posts/javascript/file/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.html","title":"javascript文件上传","lang":"zh-CN","frontmatter":{"icon":"javascript","order":1,"date":"2024-09-03T00:00:00.000Z","author":"h7ml","title":"javascript文件上传","description":"javascript文件上传","footer":"<a href='https://beian.mit.gov.cn/' target='blank'>浙ICP备2021037683号-2</a>javascript文件上传","star":1,"image":"https://www.h7ml.cn/logo.png","banner":"https://www.h7ml.cn/logo.png","shortTitle":"javascript文件上传","category":["javascript"],"tag":["javascript"],"head":[["meta",{"name":"keywords","content":"javascript文件上传"}],["link",{"rel":"canonical","href":"https://www.h7ml.cn/posts/javascript/file/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.html"}],["meta",{"property":"og:url","content":"https://www.h7ml.cn/posts/javascript/file/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.html"}],["meta",{"property":"og:site_name","content":"h7ml-前端物语"}],["meta",{"property":"og:title","content":"javascript文件上传"}],["meta",{"property":"og:description","content":"javascript文件上传"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://www.h7ml.cn/logo.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-10-16T10:14:22.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://www.h7ml.cn/logo.png"}],["meta",{"name":"twitter:image:alt","content":"javascript文件上传"}],["meta",{"property":"article:author","content":"h7ml"}],["meta",{"property":"article:tag","content":"javascript"}],["meta",{"property":"article:published_time","content":"2024-09-03T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-10-16T10:14:22.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"javascript文件上传\\",\\"image\\":[\\"https://www.h7ml.cn/logo.png\\"],\\"datePublished\\":\\"2024-09-03T00:00:00.000Z\\",\\"dateModified\\":\\"2023-10-16T10:14:22.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"h7ml\\"}]}"]]},"headers":[{"level":2,"title":"交互","slug":"交互","link":"#交互","children":[{"level":3,"title":"点击上传多个文件 multiple","slug":"点击上传多个文件-multiple","link":"#点击上传多个文件-multiple","children":[]},{"level":3,"title":"点击上传文件夹 odirectory","slug":"点击上传文件夹-odirectory","link":"#点击上传文件夹-odirectory","children":[]},{"level":3,"title":"拖拽上传文件和文件夹dataTransfer","slug":"拖拽上传文件和文件夹datatransfer","link":"#拖拽上传文件和文件夹datatransfer","children":[]},{"level":3,"title":"如何实现多文件上传","slug":"如何实现多文件上传","link":"#如何实现多文件上传","children":[]}]},{"level":2,"title":"上传进度progress","slug":"上传进度progress","link":"#上传进度progress","children":[{"level":3,"title":"如何实现上传进度追踪","slug":"如何实现上传进度追踪","link":"#如何实现上传进度追踪","children":[]}]}],"git":{"createdTime":1693759102000,"updatedTime":1697451262000,"contributors":[{"name":"h7ml","email":"h7ml@qq.com","commits":3}]},"readingTime":{"minutes":4.64,"words":1393},"filePathRelative":"posts/javascript/file/文件上传.md","localizedDate":"2024年9月3日","excerpt":"<h2>交互</h2>\\n<h3>点击上传多个文件 <code>multiple</code></h3>\\n<p>用户可以选择多个文件，然后文件列表会显示出来。需要注意的是，文件的选择是通过<code>&lt;input type=\\"file\\" multiple&gt;</code>标签来实现的，其中<code>multiple</code>属性允许选择多个文件。</p>\\n\\n<h3>点击上传文件夹 <code>odirectory</code></h3>\\n<p>允许用户上传整个文件夹，而不仅仅是单个文件。使用<code>&lt;input type=\\"file\\" webkitdirectory mozdirectory odirectory&gt;</code>标签来启用文件夹上传功能。在处理时，代码会检查文件是否为文件夹，然后递归读取文件夹中的文件列表。</p>"}`);export{z as comp,S as data};
